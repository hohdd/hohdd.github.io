<!DOCTYPE html><html lang="vi"><title>Tìm hiểu Particle System trong Unity</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Tìm hiểu Particle System trong Unity"><meta name="author" content="Dong Ho"> <META NAME="ROBOTS" CONTENT="noindex, nofollow, noarchive, nosnippet, noimageindex"><link rel="manifest" href="/assets/manifest.json"><meta name="theme-color" content="#317EFB"/><link href="/assets/css/main.css" rel="stylesheet" media="all"><link rel="stylesheet" href="/assets/css/delay.css" media="none" onload="if(media!='all')media='all'"> <noscript><link rel="stylesheet" href="/assets/css/delay.css"></noscript><link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /><link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png"><body onload="_documentReady_()"><nav class="w3-sidebar w3-black w3-animate-opacity w3-xxlarge z-index-999" style="display:none;padding-top:100px;top:0px;" id="menuElm"><div class="w3-bar-block w3-center"><h1 class="w3-bar-item w3-button w3-text-grey w3-hover-black"> <a href="/pages/about" title="About">About</a></h1><h1 class="w3-bar-item w3-button w3-text-grey w3-hover-black"> <a href="/pages/authors" title="Teams">Teams</a></h1><h1 class="w3-bar-item w3-button w3-text-grey w3-hover-black"> <a href="/pages/categories" title="Archives">Archives</a></h1><h1 class="w3-bar-item w3-button w3-text-grey w3-hover-black"> <a href="/collections" title="Collections">Collections</a></h1><h1 class="w3-bar-item w3-button w3-text-grey w3-hover-black"> <a href="/pages/tools" title="Tools">Tools</a></h1></div></nav><div class="w3-top z-index-9999 w3-white" id="navbar"><div class="w3-bar w3-padding w3-card opacity-transition-hover w3-display-container" style="letter-spacing:4px;"><div class="w3-display-left w3-padding w3-hide-small"> <img id="hat" src="/assets/img/kmw/hat63.png"> <a href="/" class="w3-bar-item">Mr.Winter</a></div><div class="w3-display-middle w3-hide-small"></div><div class="w3-right" > <span class="material-icons w3-button" id="menuIcon" onclick="toggleMenu()" title="Menu">menu</span></div></div></div><div class="w3-content w3-panel w3-animate-opacity-slow" style="max-width:1100px"><main><div class="w3-padding-32"></div><article id="articleBody"><h2>Tìm hiểu Particle System trong Unity</h2><span class="opacity-transition-hover"> <span class="author"> <a href="/authors/dongho" class="hvr-float-shadow">Dong Ho</a> </span> <time datetime="2020-05-15T14:26:14+07:00" class="by-line">15 May 2020 <span> <a href="/collections/game-development#Investigate" class="hvr-float-shadow">Investigate</a> </span> </time> <span title="reading time">· about 17 mins read </span> </span><div class="w3-section konamiHide"><div id="search-container"> <label> <span class="dh-unnecessary">Tìm kiếm</span> <input type="text" id="search-input" placeholder="Hoặc tìm bài viết khác..." class="w3-margin-top"> </label><div id="results-container" class="w3-card"></div></div></div><div class="w3-section"><div class="content-speech"><ul class="toc-nav dh-black-8 w3-animate-opacity dh-padding-right-1em"><li class="toc-entry toc-h2"><a href="#graphics--visual-effects--particle-system" spy-toc="Graphics &gt; Visual effects &gt; Particle System">Graphics &gt; Visual effects &gt; Particle System</a><ul><li class="toc-entry toc-h3"><a href="#particle-effect-panel" spy-toc="Particle Effect panel">Particle Effect panel</a><li class="toc-entry toc-h3"><a href="#varying-properties-over-time" spy-toc="Varying properties over time">Varying properties over time</a><ul><li class="toc-entry toc-h4"><a href="#particle-system-curves-editor" spy-toc="Particle System Curves editor:">Particle System Curves editor:</a><li class="toc-entry toc-h4"><a href="#start-color-editor" spy-toc="Start Color (editor)">Start Color (editor)</a></ul><li class="toc-entry toc-h3"><a href="#animation-bindings" spy-toc="Animation bindings">Animation bindings</a><li class="toc-entry toc-h3"><a href="#particle-system-gpu-instancing" spy-toc="Particle System GPU Instancing">Particle System GPU Instancing</a><li class="toc-entry toc-h3"><a href="#others-feature" spy-toc="Others Feature">Others Feature</a></ul><li class="toc-entry toc-h2"><a href="#components" spy-toc="Components">Components</a><ul><li class="toc-entry toc-h3"><a href="#particle-system-components" spy-toc="Particle System Components">Particle System Components</a><li class="toc-entry toc-h3"><a href="#particle-system-force-field" spy-toc="Particle System Force Field">Particle System Force Field</a></ul><li class="toc-entry toc-h2"><a href="#modules" spy-toc="Modules">Modules</a><ul><li class="toc-entry toc-h3"><a href="#main-module" spy-toc="Main Module">Main Module</a><li class="toc-entry toc-h3"><a href="#emission-module" spy-toc="Emission Module">Emission Module</a><li class="toc-entry toc-h3"><a href="#shape-module" spy-toc="Shape module">Shape module</a><ul><li class="toc-entry toc-h4"><a href="#sphere-hemisphere" spy-toc="Sphere, Hemisphere">Sphere, Hemisphere</a><li class="toc-entry toc-h4"><a href="#cone" spy-toc="Cone">Cone</a></ul></ul></ul><h2 id="graphics--visual-effects--particle-system"> <a class="anchor" href="#graphics--visual-effects--particle-system" aria-hidden="true" spy-title="Graphics &gt; Visual effects &gt; Particle System"><span class="octicon octicon-link"></span></a>Graphics &gt; Visual effects &gt; Particle System</h2><p>Một hệ thống hạt mô phỏng và hiển thị nhiều hình ảnh nhỏ hoặc Lưới, được gọi là các hạt, để tạo hiệu ứng hình ảnh. Mỗi hạt trong hệ thống đại diện cho một thành phần đồ họa riêng lẻ trong hiệu ứng. Hệ thống mô phỏng chung từng hạt để tạo ấn tượng về hiệu ứng hoàn chỉnh.<p>Hệ thống hạt rất hữu ích khi bạn muốn tạo các vật thể động như lửa, khói hoặc chất lỏng vì rất khó để mô tả loại vật thể này bằng Lưới (3D) hoặc Sprite (2D). Lưới và Họa tiết mô tả các vật thể rắn tốt hơn như ngôi nhà hoặc ô tô.<p>Để mang lại sự linh hoạt khi bạn tạo một hệ thống hạt , Unity cung cấp hai giải pháp để bạn lựa chọn:<ul><li>Built-in Particle System: Tích hợp sẵn trong Unity<li>Visual Effect Graph: Một giải pháp có thể chạy trên GPU để mô phỏng hàng triệu hạt và tạo hiệu ứng hình ảnh quy mô lớn. Cài đặt thông qua package manager.</ul><h3 id="particle-effect-panel"> <a class="anchor" href="#particle-effect-panel" aria-hidden="true" spy-title="Particle Effect panel"><span class="octicon octicon-link"></span></a>Particle Effect panel</h3><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/PartSysEffectPanel.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/PartSysMainInspPartEffect.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><ul><li>Playback <strong>Speed</strong>: cho phép bạn tăng tốc hoặc làm chậm quá trình mô phỏng hạt.<li>Playback <strong>Time</strong>: cho biết thời gian đã trôi qua kể từ khi hệ thống được khởi động; điều này tùy thuộc vào <strong>playback speed</strong>.<li>Particle <strong>Count</strong>: cho biết có bao nhiêu hạt hiện có trong hệ thống.<li> <strong>Simulate Layers</strong>: mặc định là “Nothing” (chỉ khi chọn mới có hiệu ứng), chọn một Layer khác sẽ tự động play mà không cần phải chọn (hữu ích để kiểm tra trong scence view).<li> <strong>Resimulate</strong>: nếu Enabled thì System áp dụng các thay đổi luôn cho các hạt đã tạo, ngược lại chỉ những hạt mới sẽ có tác dụng.<li> <strong>Show Bounds</strong>: sử dụng để kiểm tra bounds của Particles System.<li> <strong>Show Only Selected</strong>: Khi được bật, Unity sẽ ẩn tất cả các Hệ thống hạt không được chọn, cho phép bạn tập trung vào việc tạo ra một hiệu ứng duy nhất.</ul><h3 id="varying-properties-over-time"> <a class="anchor" href="#varying-properties-over-time" aria-hidden="true" spy-title="Varying properties over time"><span class="octicon octicon-link"></span></a>Varying properties over time</h3><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/ParticleSystemCurve.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br> Nhiều thuộc tính Number của hạt hoặc thậm chí toàn bộ Hệ thống hạt có thể thay đổi theo thời gian. Unity cung cấp một số phương pháp khác nhau để xác định cách thức biến đổi này xảy ra:<ul><li> <strong>Constant</strong>: (mặc định) Giá trị của property được cố định trong suốt vòng đời của nó.<li> <strong>Curve</strong>: Giá trị được chỉ định bởi một curve/graph (<em>giá trị theo thời gian</em>).<li> <strong>Random Between Two Constants</strong>: Giá trị ngẫu nhiên theo thời gian giữa 2 giá trị không đổi (giới hạn trên và giới hạn dưới).<li> <strong>Random Between Two Curves</strong>: Hai đường cong (Curves) xác định giới hạn trên và dưới của giá trị, giá trị hiện tại thay đổi ngẫu nhiên giữa các giới hạn đó.</ul><h4 id="particle-system-curves-editor"> <a class="anchor" href="#particle-system-curves-editor" aria-hidden="true" spy-title="Particle System Curves editor:"><span class="octicon octicon-link"></span></a><strong>Particle System Curves editor</strong>:</h4><ul><li> <em>Optimize</em>: Điều chỉnh đường cong thành bốn khóa trở xuống để xây dựng bộ đánh giá nhanh được gọi là Polynomial.<li> <em>Remove</em>: Deletes the selected curve.<li> <strong>Loop</strong>: Phát đường cong theo số lần được chỉ định trong vòng đời của hạt. Ví dụ: nếu bạn tạo một đường cong chia tỷ lệ kích thước của một hạt lên và xuống, bạn có thể yêu cầu nó lặp lại nhiều lần, điều này khiến cho hoạt ảnh “lên và xuống” xảy ra nhiều lần trước khi hạt chết, thay vì chỉ một lần.<li> <strong>Ping Pong</strong>: Tương tự như Loop, nhưng chơi đường cong tiến rồi lùi trong một dao động liên tục.<li> <strong>Clamp</strong>: Giới hạn các truy vấn hạt nằm ngoài phạm vi thời gian của đường cong ở giá trị đầu tiên hoặc cuối cùng của đường cong.</ul><h4 id="start-color-editor"> <a class="anchor" href="#start-color-editor" aria-hidden="true" spy-title="Start Color (editor)"><span class="octicon octicon-link"></span></a><strong>Start Color (editor)</strong></h4><ul><li> <strong>Color</strong>: Tất cả các hạt đều bắt đầu bằng màu này trong suốt thời gian tồn tại của Hệ thống Hạt. Các hạt vẫn có thể thay đổi màu sắc trong suốt cuộc đời của chúng (<strong>cấu hình ở module khác</strong>).<li> <strong>Gradient</strong>: Bốc màu cho hạt từ dải màu Gradient dựa trên số lượng Queue hạt.<li> <strong>Random Between Two Colors</strong>: Hệ thống hạt chọn màu hạt bắt đầu từ phép nội suy tuyến tính ngẫu nhiên giữa hai màu đã cho.<li> <strong>Random Between Two Gradients</strong>: Màu hạt bắt đầu được chọn dưới dạng nội suy tuyến tính ngẫu nhiên giữa hai màu đã chọn giữa 2 Gradients.<li> <strong>Random Color</strong>: gần giống với Gradient, màu sẽ không lấy theo đường Gradient (theo queue) mà pick Random trong toàn dải màu.</ul><div class="w3-card w3-leftbar w3-border-blue w3-pale-blue w3-panel w3-padding-16">Các thuộc tính màu khác, chẳng hạn như <strong>Color over Lifetime</strong>, có thể sử dụng chế độ Chuyển màu (Gradient) hoặc Ngẫu nhiên giữa hai chuyển màu.<br>Các <strong>Color properties</strong> trong các mô-đun khác nhau được nhân với nhau trên mỗi kênh để tính toán kết quả Color cuối cùng.</div><h3 id="animation-bindings"> <a class="anchor" href="#animation-bindings" aria-hidden="true" spy-title="Animation bindings"><span class="octicon octicon-link"></span></a>Animation bindings</h3><p>Tất cả các thuộc tính của hạt đều có thể truy cập được bằng hệ thống Hoạt hình, nghĩa là bạn có thể tạo khung hình chính chúng vào và điều khiển chúng từ hoạt ảnh của bạn.<p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/ParticleSystemAnimatorComponent.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br> Để truy cập các thuộc tính của Hệ thống hạt, phải có <strong>Animator Component</strong> được gắn vào GameObject của Hệ thống Hạt. Bộ điều khiển Hoạt ảnh (<strong>Animation Controller</strong>) và Hoạt ảnh (<strong>Animation</strong>) cũng được yêu cầu.<br><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/ParticleSystemAnimationWindow.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><h3 id="particle-system-gpu-instancing"> <a class="anchor" href="#particle-system-gpu-instancing" aria-hidden="true" spy-title="Particle System GPU Instancing"><span class="octicon octicon-link"></span></a>Particle System GPU Instancing</h3><p><strong>GPU</strong> giúp tăng performance render hơn CPU, hiệu quả đặc biệt là với <strong>Mesh particles</strong><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/PartSysInstancingEnable.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br> Để có thể sử dụng <strong>GPU</strong> với hệ thống hạt:<ul><li>Đặt chế độ kết xuất của Hệ thống hạt thành <strong>Mesh</strong><li>Sử dụng <strong>Shader</strong> dành cho <strong>render material</strong> hỗ trợ GPU Instancing (<em>lưu ý ở dưới</em>)<li>Chạy dự án của bạn trên <strong>nền tảng hỗ trợ GPU Instancing</strong></ul><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/PartSysInstancingShader.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br><div class="w3-card w3-leftbar w3-border-blue w3-pale-blue w3-panel w3-padding-16"> LƯU Ý: Unity đi kèm với một <strong>built-in particle shader</strong> hợp hỗ trợ <strong>GPU Instancing</strong>, nhưng <strong>Default particle material</strong> không sử dụng nó, vì vậy bạn phải thay đổi điều này để sử dụng GPU Instancing. <strong>Particle shader</strong> hỗ trợ GPU được gọi là <strong>Particles/Standard Surface</strong>. Để sử dụng nó, bạn <strong>phải tạo Material mới</strong> của riêng mình có kiểu là <strong>Particles/Standard Surface</strong>. Sau đó, bạn phải gán Material mới này cho trường Material trong mô-đun <strong>Renderer</strong>.<p>Nếu bạn đang sử dụng một shader khác cho các hạt của mình thì nó phải sử dụng <strong>'#pragma target 4.5' hoặc cao hơn</strong>. Yêu cầu này cao hơn so với GPU Instancing thông thường trong Unity vì Hệ thống Particle ghi tất cả instance data của nó vào <strong>một bộ đệm lớn duy nhất</strong> thay vì chia instancing thành nhiều <strong>lệnh draw</strong>.</div><h3 id="others-feature"> <a class="anchor" href="#others-feature" aria-hidden="true" spy-title="Others Feature"><span class="octicon octicon-link"></span></a>Others Feature</h3><ul><li>Particle System vertex streams and Standard Shader support<li>Particle System C# Job System integration</ul><h2 id="components"> <a class="anchor" href="#components" aria-hidden="true" spy-title="Components"><span class="octicon octicon-link"></span></a>Components</h2><h3 id="particle-system-components"> <a class="anchor" href="#particle-system-components" aria-hidden="true" spy-title="Particle System Components"><span class="octicon octicon-link"></span></a>Particle System Components</h3><p>Có thể thêm <strong>Particle System Component</strong> vào GameObject (có sẵn Transform), hoặc khi tạo ở menu Hierarchy Unity sẽ tự động tạo một GameObject (có Transform) và đính kèm Particle System Component vào GameObject đó.<p>Thành phần Hệ thống hạt có nhiều thuộc tính (properties), để thuận tiện, Inspector sắp xếp chúng thành các phần có thể thu gọn được (collapsible) gọi là “modules”.<h3 id="particle-system-force-field"> <a class="anchor" href="#particle-system-force-field" aria-hidden="true" spy-title="Particle System Force Field"><span class="octicon octicon-link"></span></a>Particle System Force Field</h3><p><strong>Particle System Force Field component</strong> tác dụng lực (forces) lên các hạt trong Hệ thống hạt. Để gắn Component này vào Hệ thống hạt, hãy bật Mô-đun <strong>External Forces</strong> trong Hệ thống hạt và gán <strong>Layer Mask</strong> hoặc thành phần Trường lực cụ thể (Force Field component).<p>Tất cả các lực được tác dụng trong không gian cục bộ của Trường lực. Ví dụ: việc xoay Biến đổi sẽ ảnh hưởng đến các thuộc tính hướng và xoay.<p><strong>Properties</strong>:<ul><li> <strong>Shape</strong>: Chọn hình dạng của vùng ảnh hưởng (Box, Sphere.. Start-End Range).<li> <strong>Gravity</strong>: Càng lớn thì càng bị hút mạnh về tâm (nhanh chóng trở lại). Có thể chọn vị trí (hướng) các hạt bị hút về (0: tâm; 1: rìa ngoài của Shape)<li> <strong>Rotation</strong>: cho phép tạo XOÁY (Attraction:0-1 độ rộng của xoáy; Speed: tốc độ xoáy, Randomness:X-Y:0-1 đê tạo ngẫu nhiên TRỤC ĐẨY các hạt)<li> <strong>Drag</strong>: mức độ làm chậm các hạt (Strength), điều chỉnh theo Size của hạt (Multiply by Size), điều chỉnh theo Velocity (Multiply by Velocity)<li> <strong>Vector Field</strong>: sử dụng file Texture 3D để đại diện hướng lực (x, y, z) tác dụng lên hạt.</ul><h2 id="modules"> <a class="anchor" href="#modules" aria-hidden="true" spy-title="Modules"><span class="octicon octicon-link"></span></a>Modules</h2><h3 id="main-module"> <a class="anchor" href="#main-module" aria-hidden="true" spy-title="Main Module"><span class="octicon octicon-link"></span></a>Main Module</h3><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/PartSysPartSysInsp.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br> Main Module chứa các thuộc tính chung ảnh hưởng đến toàn bộ hệ thống hạt. Hầu hết các properties này kiểm soát trạng thái ban đầu của các hạt mới được tạo ra.<p><strong>API</strong>:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ParticleSystem</span> <span class="n">ps</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">ParticleSystem</span><span class="p">&gt;();</span>
<span class="n">ParticleSystem</span><span class="p">.</span><span class="n">MainModule</span> <span class="n">main</span> <span class="p">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">main</span><span class="p">;</span>
<span class="n">main</span><span class="p">.</span><span class="n">startDelay</span> <span class="p">=</span> <span class="m">5.0f</span><span class="p">;</span>
<span class="n">main</span><span class="p">.</span><span class="n">startLifetime</span> <span class="p">=</span> <span class="m">2.0f</span><span class="p">;</span>
</code></pre></div></div><p><strong>Properties</strong>:<div class="w3-card w3-leftbar w3-border-blue w3-pale-blue w3-panel w3-padding-16"> <strong>Main Module</strong>: Start Speed, Start Lifetime, Start Color, Start Size, Stop Action</div><ul><li> <strong>Duration</strong>: Tuổi/Khoảng thời gian hệ thống chạy (khi Start Lifetime vẫn còn thì thấy hệ thống vẫn Play?).<li> <strong>Looping</strong>: Nếu được bật, hệ thống sẽ khởi động lại khi kết thúc để tiếp tục lặp lại chu kỳ.<li> <strong>Prewarm</strong>: Nếu được bật, hệ thống sẽ được khởi tạo như thể nó đã hoàn thành toàn bộ chu trình (chỉ hoạt động nếu Vòng lặp cũng được bật).<li> <strong>Start Delay</strong>: Độ trễ tính bằng giây trước khi hệ thống bắt đầu phát hạt.<li> <strong>Start Lifetime</strong>: Thời gian sống (ban đầu) của các hạt.<li> <strong>Start Speed</strong>: Vận tốc ban đầu của mỗi hạt (khoảng bắn xa so với tâm).<li> <strong>Start Size + 3D Start Size</strong>: kiểm soát Kích thước ban đầu của mỗi hạt.<li> <strong>Start Rotation + 3D Start Rotation</strong>: Góc quay ban đầu (XYZ) của mỗi hạt theo TRỤC (Start Rotation = Z).<li> <strong>Flip Rotation</strong>: Làm cho một số hạt Flip, 0-1 càng lớn Flip càng nhiều.<li> <strong>Start Color</strong>: Màu sắc ban đầu của mỗi hạt (bốc theo số lượng hạt “<strong>Max Particles</strong>”).<li> <strong>Gravity Modifier</strong>: [<em>TODO</em>] Cân chỉnh giá trị trọng lực được đặt trong cửa sổ Vật lý (Edit &gt; Project Settings &gt; Physics). Giá trị bằng 0 sẽ tắt trọng lực.<li> <strong>Simulation Space</strong>: Kiểm soát xem các hạt có hoạt hình trong <strong>Local</strong> của parent object hay không (di chuyển cùng parent object), trong <strong>World</strong> hoặc <strong>Custom</strong> (di chuyển với đối tượng tùy chỉnh được chọn).<li> <strong>Simulation Speed</strong>: Điều chỉnh tốc độ cập nhật (playback) toàn bộ hệ thống.<li> <strong>Delta Time</strong>: lựa chọn giữa <strong>Scaled</strong> (sử dụng giá trị của <em>Time Scale</em> trong <em>Project Settings &gt; Time</em>) và <strong>Unscaled</strong> (bỏ qua <em>Time Scale</em>). Điều này rất hữu ích cho các Hệ thống hạt xuất hiện trên Menu Tạm dừng (khi mà <em>Time Scale = 0</em>).<li> <strong>Scaling Mode</strong>: Chọn cách áp dụng giá trị scale từ Transform với các tùy chọn <strong>Hierarchy</strong> (theo Parent), <strong>Local</strong> (ignore Parent) và <strong>Shape</strong> (size ko ảnh hưởng, chỉ ảnh hưởng vị trí bắt đầu)<li> <strong>Play on Awake</strong>: Nếu được bật, Hệ thống hạt sẽ tự động khởi động khi đối tượng được tạo (ko cần gọi PLAY).<li> <strong>Emitter Velocity</strong>: Chọn cách Hệ thống hạt tính toán vận tốc (velocity) được sử dụng bởi các mô-đun <em>Inherit Velocity</em> và <em>Emission</em>. Hệ thống hạt có thể tính toán vận tốc bằng Rigidbody Component nếu có tồn tại hoặc bằng cách theo dõi chuyển động của Transform Component. Nếu không có <em>Rigidbody Component</em> nào tồn tại, hệ thống sẽ sử dụng <em>Transform Component</em> theo mặc định.<li> <strong>Max Particles</strong>: Số lượng hạt tối đa trong hệ thống cùng một lúc. Nếu đạt đến giới hạn, một số hạt sẽ bị loại bỏ.<li> <strong>Auto Random Seed</strong>: Nếu được bật, Hệ thống hạt sẽ trông khác đi mỗi khi được phát. Ngược lại, hệ thống hạt sẽ giống hệt nhau mỗi lần Play.<li> <strong>Random Seed</strong>: Khi vô hiệu hóa <em>Auto Random Seed</em>, giá trị này được sử dụng để tạo hiệu ứng lặp lại duy nhất.<li> <strong>Stop Action</strong>: (Disable, Destroy, Callback). Khi tất cả các hạt thuộc hệ thống đã hoàn thành, hệ thống có thể thực hiện một hành động. Một hệ thống được xác định là đã dừng khi tất cả các hạt của nó đã chết và tuổi của nó đã vượt quá Thời lượng. Đối với <em>hệ thống lặp</em>, điều này chỉ xảy ra nếu hệ thống <em>bị dừng thông qua tập lệnh</em>.<li> <strong>Culling Mode</strong>: (Automatic, Pause And Catch-up, Pause, Always Simulate) Chọn có nên tạm dừng mô phỏng Hệ thống hạt khi các hạt ở ngoài màn hình hay không.<li> <strong>Ring Buffer Mode</strong>: (Disabled, Pause Until Replaced, Loop Until Replaced) Giữ cho các hạt tồn tại cho đến khi chúng đạt đến số lượng Hạt tối đa, tại thời điểm đó các hạt mới sẽ tái chế những hạt cũ nhất, thay vì loại bỏ các hạt khi vòng đời của chúng trôi qua.</ul><h3 id="emission-module"> <a class="anchor" href="#emission-module" aria-hidden="true" spy-title="Emission Module"><span class="octicon octicon-link"></span></a>Emission Module</h3><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/PartSysEmissionModule-0.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br> Các thuộc tính trong mô-đun này ảnh hưởng đến/kiểm soát tốc độ và thời gian phát hạt của Hệ thống hạt.<p><strong>API</strong>:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ParticleSystem</span> <span class="n">ps</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">ParticleSystem</span><span class="p">&gt;();</span>
<span class="n">ParticleSystem</span><span class="p">.</span><span class="n">EmissionModule</span> <span class="n">em</span> <span class="p">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">emission</span><span class="p">;</span>
<span class="n">em</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">em</span><span class="p">.</span><span class="n">rateOverTime</span> <span class="p">=</span> <span class="m">20.0f</span><span class="p">;</span>
<span class="n">em</span><span class="p">.</span><span class="nf">SetBursts</span><span class="p">(</span>
    <span class="k">new</span> <span class="n">ParticleSystem</span><span class="p">.</span><span class="n">Burst</span><span class="p">[]{</span>
        <span class="k">new</span> <span class="n">ParticleSystem</span><span class="p">.</span><span class="nf">Burst</span><span class="p">(</span><span class="m">2.0f</span><span class="p">,</span> <span class="m">100</span><span class="p">),</span>
        <span class="k">new</span> <span class="n">ParticleSystem</span><span class="p">.</span><span class="nf">Burst</span><span class="p">(</span><span class="m">4.0f</span><span class="p">,</span> <span class="m">100</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div><p><strong>Properties</strong>:<ul><li> <strong>Rate over Time</strong>: Số hạt phát ra trong một đơn vị thời gian (mỗi giây).<li> <strong>Rate over Distance</strong>: Số lượng hạt phát ra trên một đơn vị khoảng cách di chuyển.<li> <strong>Bursts</strong>: Một “bùng nổ” là một sự kiện SINH THÊM ra các hạt. Các cài đặt này cho phép các hạt được phát ra vào những thời điểm được chỉ định.<ul><li> <strong>Time</strong>: Mốc thời gian sẽ Burst (tính bằng giây, sau khi Hệ thống hạt bắt đầu phát).<li> <strong>Count</strong>: Số lượng hạt sẽ Burst.<li> <strong>Cycles</strong>: Số lần Burst liên tiếp.<li> <strong>Interval</strong>: Thời gian (tính bằng giây) giữa mỗi chu kỳ của Burst được kích hoạt.<li> <strong>Probability</strong>: Xác suất để Burst (0-1: 0 chắc chắn ko Burst, 1 chắc chắn sẽ Burst)</ul></ul><div class="w3-card w3-leftbar w3-border-green w3-pale-green w3-panel w3-padding-16">VD: <strong>(5, 3, 2, 3, 0.6)</strong> Tại thời điểm <strong>5s (Time)</strong> sẽ phát ra <strong>3 (Count)</strong> hạt, chờ tiếp <strong>3s (Interval)</strong> sau sẽ phát lượt tiếp theo cho đủ <strong>2 lần (Cycles)</strong>, việc có Burst thành công hay không tùy vào Xác suất <strong>0.6 (Probability)</strong></div><h3 id="shape-module"> <a class="anchor" href="#shape-module" aria-hidden="true" spy-title="Shape module"><span class="octicon octicon-link"></span></a>Shape module</h3><p>Mô-đun này xác định thể tích (<strong>volume</strong>) hoặc bề mặt (<strong>surface</strong>) mà các hạt được phát ra và hướng của vận tốc bắt đầu (<strong>direction</strong> of the start velocity).<p><strong>Shape property</strong> xác định hình dạng của thể tích phát, các thuộc tính còn lại sẽ khác nhau tùy thuộc vào <em>Shape property</em> đã chọn.<p>Phần lớn hướng emit sẽ là <strong>trục Y</strong> nếu là đường thẳng (Edge) hoặc hình tròn/cầu/mesh tròn sẽ <strong>hướng ra ngoài</strong>. Nếu là hình vuông/mesh vuông thì hướng sẽ <strong>vuông góc với bề mặt</strong>.<p><strong>API</strong>:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ParticleSystem</span> <span class="n">ps</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">ParticleSystem</span><span class="p">&gt;();</span>
<span class="n">ParticleSystem</span><span class="p">.</span><span class="n">ShapeModule</span> <span class="n">sh</span> <span class="p">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">shape</span><span class="p">;</span>
<span class="n">sh</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">sh</span><span class="p">.</span><span class="n">shapeType</span> <span class="p">=</span> <span class="n">ParticleSystemShapeType</span><span class="p">.</span><span class="n">Mesh</span><span class="p">;</span>
<span class="n">sh</span><span class="p">.</span><span class="n">mesh</span> <span class="p">=</span> <span class="n">myMesh</span><span class="p">;</span> <span class="c1">// public Mesh myMesh;</span>
</code></pre></div></div><h4 id="sphere-hemisphere"> <a class="anchor" href="#sphere-hemisphere" aria-hidden="true" spy-title="Sphere, Hemisphere"><span class="octicon octicon-link"></span></a>Sphere, Hemisphere</h4><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/ShapeModule.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><br> Lưu ý: Hình cầu và bán cầu có cùng tính chất.<p><strong>Properties</strong>:<ul><li> <strong>Shape</strong>: Hình dạng của emission volume.<ul><li> <strong>Sphere</strong>: Phát hạt đồng đều theo mọi hướng.<li> <strong>Hemisphere</strong>: Phát hạt đồng đều theo mọi hướng trên một mặt của mặt phẳng..</ul><li> <strong>Radius</strong>: Bán kính hình tròn của hình đó.<li> <strong>Radius Thickness</strong>: (Độ dày bán kính) Tỷ lệ volume phát ra các hạt. Giá trị 0 phát ra từ bề mặt ngoài. Giá trị 1 phát ra từ toàn bộ volume. Các giá trị ở giữa sẽ sử dụng một tỷ lệ volume.<li> <strong>Arc</strong>: góc lượng giác của hình dạng 0-360 độ<li> <strong>Texture</strong>: [?] Một kết cấu được sử dụng để pha màu và loại bỏ các hạt.<li> <strong>Clip Channel</strong>: [?] Một kênh từ kết cấu được sử dụng để loại bỏ các hạt.<li> <strong>Clip Threshold</strong>: (Ngưỡng clip) Khi ánh xạ các hạt tới các vị trí trên kết cấu, hãy loại bỏ bất kỳ điểm ảnh nào có màu sắc giảm xuống dưới ngưỡng này (0-1).<li> <strong>Color affects Particles</strong>: (Màu sắc ảnh hưởng đến hạt) Nhân màu hạt với màu kết cấu.<li> <strong>Alpha affects Particles</strong>: (Alpha ảnh hưởng đến các hạt) Nhân alpha hạt với alpha kết cấu.<li> <strong>Bilinear Filtering</strong>: (Lọc song tuyến) Khi đọc kết cấu, hãy kết hợp 4 mẫu lân cận để thay đổi màu hạt mượt mà hơn, bất kể kích thước kết cấu.<li> <strong>Position</strong>: Áp dụng phần bù (offset) cho hình dạng bộ phát.<li> <strong>Rotation</strong>: Xoay hình dạng bộ phát.<li> <strong>Scale</strong>: Thay đổi kích thước của hình dạng bộ phát.<li> <strong>Align to Direction</strong>: (Căn chỉnh theo hướng) Định hướng các hạt dựa trên hướng di chuyển ban đầu của chúng. Điều này có thể hữu ích nếu bạn muốn mô phỏng, chẳng hạn như các mảng sơn ô tô bay ra khỏi thân ô tô khi va chạm.<li> <strong>Randomize Direction</strong>: Random các hướng hạt ngẫu nhiên. Khi được đặt thành 0, cài đặt này không có hiệu lực. Khi được đặt thành 1, hướng hạt hoàn toàn ngẫu nhiên.<li> <strong>Spherize Direction</strong>: Pha trộn các hướng của hạt theo hướng hình cầu, di chuyển ra ngoài từ tâm. Khi được đặt thành 0, cài đặt này không có hiệu lực. Khi được đặt thành 1, hướng hạt sẽ hướng ra ngoài từ tâm (hoạt động giống hệt như khi Hình dạng được đặt thành Hình cầu Sphere).<li> <strong>Randomize Position</strong>: Di chuyển (Position) các hạt theo số lượng ngẫu nhiên, đến giá trị được chỉ định. Khi giá trị này được đặt thành 0, cài đặt này không có hiệu lực. Bất kỳ giá trị nào khác sẽ áp dụng một số tính ngẫu nhiên cho vị trí (Position) sinh sản của các hạt.<li> <strong>Transform Tool for Shape</strong>: gizmo, position, rotation, scale. Sử dụng để tinh chỉnh Local Transform của Shape</ul><h4 id="cone"> <a class="anchor" href="#cone" aria-hidden="true" spy-title="Cone"><span class="octicon octicon-link"></span></a>Cone</h4><p><img src="https://docs.unity3d.com/2021.3/Documentation/uploads/Main/ShapeModule1.png" alt="TEXT" class="w3-image cursor-zoom" onclick="onZoomImg(this)"><p><strong>Properties</strong>:<ul><li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB<li> <strong>AAA</strong>: BBBB</ul></div></div></article><div class="w3-padding-16"></div><div class="opacity-transition-hover"><h5>Xem thêm các bài viết khác cùng chủ đề</h5><ul class="w3-ul"><li><span></span>→ Tìm hiểu Particle System trong Unity · 17 mins read</ul></div><script src="/assets/js/search-custom.min.js" type="text/javascript"></script> <script> (function() { JSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('results-container'), json: '/search/search-collections.json' }) })(); </script><div id="qModal" class="w3-modal"><div class="w3-modal-content"><div class="w3-container"> <span onclick="document.getElementById('qModal').style.display='none'" class="w3-button w3-display-topright">&times;</span><div><p id="qModalSentenceEmpty" class="w3-panel"><hr><p id="qModalSentencePice" class="w3-panel"><p id="qModalAnswerMsg" class="w3-panel" style="display: none;"><span class="w3-red">Không đúng rôi! thử lại đi...</span><hr><p class="w3-panel"> <button class="material-icons w3-btn w3-border" id="qModalAudioControlEl" onclick="qModalAudioControlPlay()" title="Play the sound">play_arrow</button> <button class="material-icons w3-btn w3-border" id="qModalResetQuizEl" onclick="qModalResetQuiz()" title="Reset the quiz">cached</button> <button class="material-icons w3-btn w3-border" id="qModalGiveUpAndShowAnswerEl" onclick="qModalGiveUpAndShowAnswer()" title="Give up...">close</button> <button class="w3-btn w3-white w3-border" onclick="clearFormTextArea()" title="Clear the textarea">Clear</button><p id="qModalSentenceTypeArea" class="w3-panel"> <textarea id="sentenceTypeAreaId" style="margin: 0px;width: 100%;height: 99px;" onkeyup="qModalTxtAreaOnkeyup()"></textarea></div><div id="qModalTotoList" class="w3-container"><ul id="myUL"><li onclick="onClickTodoList(this)">1. Làm quiz hoàn thành câu<li onclick="onClickTodoList(this)">2. Nghe Audio và nhại theo 3 lần<li onclick="onClickTodoList(this)">3. Tự nói lại mà không nghe Audio và nhìn vào chữ đúng 3 lần<li onclick="onClickTodoList(this)">4. Gõ lại câu đến khi chính xác<li onclick="onClickTodoList(this)">5. Phân tích cú pháp và lấy ví dụ tương tự (thay các từ loại, chủ ngữ, nếu là câu hỏi thì trả lời câu hỏi)</ul></div><div class="w3-panel"></div></div></div></div><style> #qModalTotoList ul { list-style: none; margin: 0; padding: 0; } /* Style the list items */ #qModalTotoList ul li { cursor: pointer; position: relative; padding: 12px 8px 12px 40px; background: #eee; font-size: 18px; transition: 0.2s; /* make the list items unselectable */ -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } /* Set all odd list items to a different color (zebra-stripes) */ #qModalTotoList ul li:nth-child(odd) { background: #f9f9f9; } /* Darker background-color on hover */ #qModalTotoList ul li:hover { background: #ddd; } /* When clicked on, add a background color and strike out text */ #qModalTotoList ul li.checked { background: #888; color: #fff; text-decoration: line-through; } /* Add a "checked" mark when clicked on */ #qModalTotoList ul li.checked::before { content: ''; position: absolute; border-color: #fff; border-style: solid; border-width: 0 2px 2px 0; top: 10px; left: 16px; transform: rotate(45deg); height: 15px; width: 7px; } /* Style the close button */ #qModalTotoList .close { position: absolute; right: 0; top: 0; padding: 12px 16px 12px 16px; } #qModalTotoList .close:hover { background-color: #f44336; color: white; }</style><script> /* toggle 'checked' class on Todo list */ function onClickTodoList(thisVar) { thisVar.classList.toggle('checked'); } /* Create a "close" button and append it to each list item */ function appendCloseButton() { var myNodelist = document.getElementsByTagName("LI"); var i; for (i = 0; i < myNodelist.length; i++) { var span = document.createElement("SPAN"); var txt = document.createTextNode("\u00D7"); span.className = "close"; span.appendChild(txt); myNodelist[i].appendChild(span); } } /* Click on a close button to hide the current list item */ function addOnclickToCloseButton() { var close = document.getElementsByClassName("close"); var i; for (i = 0; i < close.length; i++) { close[i].onclick = function () { var div = this.parentElement; div.style.display = "none"; } } } /* Add a "checked" symbol when clicking on a list item */ function addEventClickOnList() { var list = document.querySelector('ul'); list.addEventListener('click', function (ev) { if (ev.target.tagName === 'LI') { ev.target.classList.toggle('checked'); } }, false); } /* Create a new list item when clicking on the "Add" button */ function newElement() { var li = document.createElement("li"); var inputValue = document.getElementById("myInput").value; var t = document.createTextNode(inputValue); li.appendChild(t); if (inputValue === '') { alert("You must write something!"); } else { document.getElementById("myUL").appendChild(li); } document.getElementById("myInput").value = ""; var span = document.createElement("SPAN"); var txt = document.createTextNode("\u00D7"); span.className = "close"; span.appendChild(txt); li.appendChild(span); for (i = 0; i < close.length; i++) { close[i].onclick = function () { var div = this.parentElement; div.style.display = "none"; } } } </script></main><div id="tocMenu" class="tocMenu" onclick="toggleTOC()"><div class="progress-bar" id="progressBar"></div><div title="Table Of Content" class="w3-btn w3-border w3-border-blue w3-white"> Outline</div></div><div id="audioControlGroup" class="w3-animate-opacity"><p> <span class="material-icons w3-button w3-border w3-border-blue" onclick="audioControlMinus()" title="Minus">history</span> <span class="material-icons w3-button w3-border w3-border-blue" onclick="resetCurrentAudio()" title="Reset">cached</span><p> <span class="material-icons w3-button w3-border w3-border-blue" id="audioControlEl" onclick="audioControlPlayOrPause()" title="Play/Pause">play_arrow</span> <span class="material-icons w3-button w3-border w3-border-blue" onclick="onClickGotoCurrentAudio()" title="Go to Current Audio">arrow_right_alt</span><p> <span class="material-icons w3-button w3-border w3-border-blue" onclick="audioControlPlus()" title="Plus">update</span> <span class="material-icons w3-button w3-border w3-border-blue" onclick="skipCurrentAudioAndNext()" title="Next">skip_next</span><p> <span class="material-icons w3-button w3-border w3-border-blue" onclick="openMemo()" title="Your Note">create</span> <span class="material-icons w3-button w3-border w3-border-blue" onclick="onClickShowAudioControl()" title="Hide Audio Control">close</span><p> <span class="material-icons w3-button w3-border w3-border-blue" onclick="openAudioSettings()" title="Audio Settings">settings</span> <span class="material-icons w3-button w3-border w3-border-blue" onclick="gotoBottom()" title="Go to bottom">arrow_downward</span></div><link rel="stylesheet" href="/assets/css/quill.1.3.6.snow.css" media="none" onload="if(media!='all')media='all'"> <noscript><link rel="stylesheet" href="/assets/css/quill.1.3.6.snow.css"></noscript><div id="quillNote" class="w3-modal"><div class="w3-modal-content w3-card-4 w3-animate-top" style="max-width:600px"><header class="w3-container light-grey"> <span onclick="document.getElementById('quillNote').style.display='none'" class="w3-button w3-hover-red w3-xlarge w3-display-topright">&times;</span><h2>Memo</h2></header><div class="w3-container w3-section"><div id="quillNoteEditor"></div></div><div class="w3-container w3-light-grey w3-padding"> <button class="w3-button w3-right w3-white w3-border" onclick="onNoteSave()">Save</button></div></div></div><script src="/assets/js/quill.1.3.6.js" type="text/javascript" async></script> <script type="text/javascript"> function openMemo() { try { document.getElementById('audioSettings').style.display='none'; } catch (error) { console.log(error); } toggleElmDisplay(document.getElementById('quillNote')); } function onNoteSave() { const pathKey = window.location.pathname; window.localStorage.setItem(pathKey, window.quillEditor.getHTML()); document.getElementById('quillNote').style.display = 'none'; } function loadMemo() { const pathKey = window.location.pathname; const memo = window.localStorage.getItem(pathKey); if (memo) { window.quillEditor.setHTML(memo); } } </script> <button onclick="topFunction()" title="Go to Top" id="scrollTopBtn" class="w3-btn w3-border w3-border-blue w3-white">Top</button><div id="zoomModal" class="w3-modal w3-center w3-animate-opacity" onclick="this.style.display='none'"> <img class="w3-modal-content w3-mobile w3-animate-zoom" style="width: 100%;" id="imgModal"></div><script type="text/javascript"> function openAudioControl() { } </script><footer class="w3-center w3-padding-16 dh-clear"></footer><div id="snackbar">...</div></div><script src="/assets/js/quote-api.js" type="text/javascript" async></script> <script src="/assets/js/custom.js" type="text/javascript" async></script> <script src="/assets/js/qmodal.js" type="text/javascript" async></script><link href="/assets/css/tango-highlight.css" rel="stylesheet" media="all">
